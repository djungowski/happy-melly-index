<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport" />
    <link rel="stylesheet" type="text/css" href="css/melly.css" media="all" />
    <script type="text/javascript" src="js/jquery-2.0.2.min.js"></script>
    <script type="text/javascript" src="js/happy-melly-index.js"></script>
</head>
<body>
	<h1>Happy Melly Index</h1>

	<form action="">
		<p>
			<label>Where do you live in?</label>
			<select name="origin"></select>
		</p>

		<p>
			<label>What is your price? (in <span id="currency"></span>)</label>
			<input type="text" name="origin-price" id="origin-price" value="1000" />
		</p>

		<p>
			<label>What is your destination country?</label>
			<select name="destination"></select>
		</p>

		<p class="final-price">
			<span>Happy Melly Index suggests a price of</span>
			<span class="final-price"></span>
			<span class="final-currency"></span>
		</p>
	</form>

	<script type="text/javascript">
	$('select[name="origin"]').on('change', function(event) {
		var index,
			country;

		index = $(event.target).find('option:selected').val();
		country = window.happyMellyIndex[index];
		$('#currency').html(country['currency']);
	});
	</script>

	<script type="text/javascript">
		var selects,
			option,
			country;

		selects = $('select');
		for (var index in window.happyMellyIndex) {
			country = window.happyMellyIndex[index];
			if (index == 0) {
				$('#currency').html(country['currency']);
			}
			option = $('<option value="' + index + '">' + country['name'] + '</option>');
			selects.append(option);
		}
	</script>
</body>
</html>